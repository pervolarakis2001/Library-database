{% extends "base3.html" %}  {% block title %}Operator
{% endblock title %}
{% block content %}
<a href="\operator\book\add"> <button class="btn btn-success" style="position: relative; right: 10px;" >
    + Book
</button></a>

<center>
    <div class="card-body" style="width: 500px; text-align: left;">
       
        <form action="/find_book_op",  method="POST">
          <div class="form-group">
          <div class="form-group">
            <label for="title">Title:</label>
            <input required="" class="form-control" name="title"  type="text">
          </div>
          
          <div class="form-group">
              <label for="category">Category:</label>
              <input class="form-control" name="category" type="text">
            </div>
          <div class="form-group">
            <label for="author">Autor:</label>
            <input class="form-control" name="author" type="text">
          </div>
          <div class="form-group">
            <label for="avail_copies">avail_copies:</label>
            <input class="form-control" name="avail_copies" type="text">
          </div>
          <center><input type="submit" class="btn_3" value="submit">  </center>  
          </form>
        </div>
      </div>
    
      {% if searched %}
    
      <div class="row" id="row" >            
        <div class="col-md-12" >     
            <div class="card" id="card-container" style="width: 1300px; font-size: 15px;">
                <div class="card-body" >
                    <table class="table table-striped table-sm table-borderless">
                        <thead>
                            <tr>
                                <th>isbn</th>
                                <th>title</th>
                                <th>publisher</th>
                                <th>num_of_pages</th>
                                <th>avail_copies</th>
                                <th>language </th>
                                <th>Auhtors </th>
                                <th>category </th>
                                <th> add borrowing </th>
                               
                                <th>delete</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                           
                            {% for sch in books %}
                            <tr>
                                <td> {{ sch.ISBN}} </td>                        
                                <td> {{ sch.title }} </td>
                                <td> {{ sch.publisher}} </td>
                                <td> {{ sch.num_of_pages }} </td>
                                <td> {{ sch.avail_copies }} </td>
                                <td> {{ sch.language }} </td>
                                <td> {{ sch.author }} </td>
                                <td> {{ sch.category }} </td>   
                               
                                
                            <td>
                                <form action="/borrowing/add/man" method="POST">
                                    <input type="hidden" name="isbn" value="{{ sch.ISBN }}">
                                    <input type="hidden" name="title" value="{{ sch.title}}">
                                    <input type="hidden" name="publisherl" value="{{ sch.publisher }}">
                                    <input type="hidden" name="avail_copies" value="{{sch.avail_copies }}">
                                    <input type="hidden" name="language" value="{{sch.language }}">
                                    <input type="hidden" name="author" value="{{ sch.author }}">
                                    <input type="hidden" name="category" value="{{ sch.category }}">                    
                                      <button style="border:0"> <i class="fa-regular fa-calendar-plus"></i></button>                      
                                    </form>
                                   
                                   </td>
                                   <td>
                                    <form action="/delete_book" method="POST">
                                        <input type="hidden" name="isbn" value="{{ sch.ISBN }}">
                                    <input type="hidden" name="title" value="{{ sch.title}}">
                                    <input type="hidden" name="publisherl" value="{{ sch.publisher }}">
                                    <input type="hidden" name="avail_copies" value="{{sch.avail_copies }}">
                                    <input type="hidden" name="language" value="{{sch.language }}">
                                    <input type="hidden" name="author" value="{{ sch.author }}">
                                    <input type="hidden" name="category" value="{{ sch.category }}">                          
                                           <button style="border:0"> <i class="fa-solid fa-trash"></i></button>                       
                                        </form>
                                        </td>
                                       
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
       <br>
        
        <p></p>
    </div>
    </div>
{% else %}
<div class="row" id="row" >
    
    <div class="col-md-12" >     
        <div class="card" id="card-container" style="width: 1100px; font-size: 15px;">
            <div class="card-body" >
                <table class="table table-striped table-sm table-borderless">
                    <thead>
                        <tr>
                            <th>isbn</th>
                            <th>title</th>
                            <th>publisher</th>
                            <th>num_of_pages</th>
                            <th>avail_copies</th>
                            <th>language </th>
                            <th>Auhtors </th>
                             <th>category</th>
                             <th>edit</th>
                            
                             <th>add borrowing</th>
                             <th>delete</th>
                          
                            
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for sch in school %}
                        <tr>
                            <td> {{ sch.ISBN}} </td>
                            <td> {{ sch.title }} </td>
                            <td> {{ sch.publisher}} </td>
                            <td> {{ sch.num_of_pages }} </td>
                            <td> {{ sch.avail_copies }} </td>
                            <td> {{ sch.language }} </td>
                            <td> {{ sch.author }} </td>
                            <td> {{ sch.category }} </td>
                            
                            
                            <td>
                               
                                <form action="/operator/book/change1" method="POST">
                                    <input type="hidden" name="author" value="{{sch.author }}">
                                    <input type="hidden" name="category" value="{{sch.category }}">
                                    <input type="hidden" name="isbn" value="{{sch.ISBN }}">
                                    <button style="border:0"> <i class="fa-solid fa-pen-to-square"></i> </button>                            
                                </form>
                            </td>
                           
                            <td>
                                <form action="/borrowing/add/man" method="POST">
                                    <input type="hidden" name="isbn" value="{{ sch.ISBN }}">
                                    <input type="hidden" name="title" value="{{ sch.title}}">
                                    <input type="hidden" name="publisherl" value="{{ sch.publisher }}">
                                    <input type="hidden" name="avail_copies" value="{{sch.avail_copies }}">
                                    <input type="hidden" name="language" value="{{sch.language }}">
                                    <input type="hidden" name="author" value="{{ sch.author }}">
                                    <input type="hidden" name="category" value="{{ sch.category }}">                    
                                      <button style="border:0"> <i class="fa-regular fa-calendar-plus"></i></button>                      
                                    </form>
                                    </td>     
                                    <td>
                                        <form action="/delete_book" method="POST">
                                            <input type="hidden" name="isbn" value="{{ sch.ISBN }}">
                                            <input type="hidden" name="title" value="{{ sch.title}}">
                                            <input type="hidden" name="publisherl" value="{{ sch.publisher }}">
                                            <input type="hidden" name="avail_copies" value="{{sch.avail_copies }}">
                                            <input type="hidden" name="language" value="{{sch.language }}">
                                            <input type="hidden" name="author" value="{{ sch.author }}">
                                            <input type="hidden" name="category" value="{{ sch.category }}">                            
                                               <button style="border:0"> <i class="fa-solid fa-trash"></i></button>                       
                                            </form>
                                            </td>
                                           
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
   <br>
    
</div>
</div>

<div id="editModal" class="modal fade" role="dialog">
<div class="modal-dialog">
     <!--Modal content-->
    

{%endif%}




<script>
function setModalFields(row) {
document.getElementById("id").value = row.getAttribute("data-id");
document.getElementById("Name").value = row.getAttribute("data-name");

document.getElementById("operator_id").value = row.getAttribute("data-op");
document.getElementById("email").value = row.getAttribute("data-email");
document.getElementById("pr_First_name").value = row.getAttribute("data-prF");       
document.getElementById("pr_Last_name").value = row.getAttribute("data-prL");
document.getElementById("city").value = row.getAttribute("data-city");
document.getElementById("postcode").value = row.getAttribute("data-pos");


document.getElementById("modal-form").action = "\admin\schools\add" + document.getElementById("id").value;
document.getElementById("modal-form").method = "POST";
// document.getElementById("submit").addEventListener("click", (e) => {e.preventDefault();});
// commented line above would prevent the default behavior of the submit button, that is, sending the
// form data with a post request to the determined address and subsequently closing the pop-up
}


</script>






{% endblock %}